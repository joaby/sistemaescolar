<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Gerencia turma</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
	
  <header th:insert="~{Cabecalho :: cabecalho}"></header>
  <div th:insert="~{Menu :: menu}"></div>
  
  <div class="w3-main w3-container" style="margin-left:250px; margin-top:80px;">
  
    <div class="w3-container w3-center">
	  <h2 th:text="${infoTurma}">Turmas</h2>
	  <p th:text="${infoEscola}"></p>
    </div>
	
	<div class="w3-bar w3-dark-grey">
	  <button class="w3-bar-item w3-button" onclick="openOpcao('Alunos')">Alunos</button>
	  <button class="w3-bar-item w3-button" onclick="openOpcao('Disciplinas')">Disciplinas</button>
	</div>

  <div id="Alunos" class="w3-container opcao">
    <h2>Alunos</h2>
    <form th:action="@{/turma/{idTurma}/aluno(idTurma=${idTurma})}" method="post" th:object="${aluno}">
      <input type="text" class="w3-input w3-border" th:field="*{matricula}" placeholder="Matrícula" />
      <input type="submit" class="w3-button w3-section w3-green w3-ripple w3-padding" value="Adicionar aluno" />
    </form>
    <table class="w3-table-all w3-card-4">
	    <tr>
	   	  <th>Matrícula</th> 	
	      <th>Nome Completo</th>
	      <th>Sexo</th>
	      <th>CPF</th>
	      <th>Excluir</th>
	    </tr>
	    <tr th:each="aluno : ${alunos}">
	      <td th:text="${aluno.matricula}"></td>
	      <td th:text="${aluno.nome}"></td>
	      <td th:text="${aluno.sexo}"></td>
	      <td th:text="${aluno.cpf}"></td>
	      <td>
	      	<form th:action="@{/turma/{idTurma}/aluno/{idAluno}(idTurma=${idTurma}, idAluno=${aluno.matricula})}" method="post">
	      		<input type="hidden" name="_method" value="DELETE">
	      		<input type="submit" value="Excluir">
	      	</form>
	      </td>
	    </tr>   
	  </table>
  </div>

  <div id="Disciplinas" class="w3-container opcao" style="display:none">
    <h2>Disciplinas</h2>
    <form th:action="@{/turma/{idTurma}/disciplina(idTurma=${idTurma})}" method="post" th:object="${disciplina}">
	  <input class="w3-input w3-border" type="text" th:field="*{nome}" placeholder="Nome">
	  <button type="submit" class="w3-button w3-section w3-green w3-ripple w3-padding">Adicionar disciplina</button>	  
	</form>
    <table class="w3-table-all w3-card-4">
	    <tr>
	   	  <th>Id</th> 	
	      <th>Nome</th>
	    </tr>
	    <tr th:each="disciplina : ${disciplinas}">
	      <td th:text="${disciplina.id}"></td>
	      <td th:text="${disciplina.nome}"></td>  
	    </tr>
	  </table> 
  </div>

  <footer th:insert="~{Rodape :: rodape}"></footer>
  </div>
  
  <script>
	function openOpcao(opcaoName) {
	    var i;
	    var x = document.getElementsByClassName("opcao");
	    for (i = 0; i < x.length; i++) {
	       x[i].style.display = "none";  
	    }
	    document.getElementById(opcaoName).style.display = "block";  
	}
  </script>
  
  <script type="text/javascript" src="/js/escola.js"></script>

</body>
</html>